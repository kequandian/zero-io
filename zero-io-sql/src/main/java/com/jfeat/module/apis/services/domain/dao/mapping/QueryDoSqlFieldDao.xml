<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jfeat.module.apis.services.domain.dao.QueryDoSqlFieldDao">
    <sql id="Base_Column_List">
        `lc`.`t_apis_dosql`.id,
        `lc`.`t_apis_dosql`.api_name AS apiName,
        `lc`.`t_apis_dosql`.sql_file_path AS sqlFilePath,
        `lc`.`t_apis_dosql`.params,
        `lc`.`t_apis_dosql`.note
    </sql>

    <select id="queryMasterModel" resultType="DoSqlField">
        SELECT `lc`.`t_apis_dosql`.*
        FROM `lc`.`t_apis_dosql`
        WHERE `lc`.`t_apis_dosql`.id = #{id}
        GROUP BY `lc`.`t_apis_dosql`.id
    </select>

    <select id="findDoSqlFieldPage" resultType="DoSqlField" parameterType="DoSqlField">
        SELECT
        <include refid="Base_Column_List" />
        FROM `lc`.`t_apis_dosql`
        WHERE 1=1

        <if test="record.id != null and record.id > 0">
            AND `lc`.`t_apis_dosql`.id LIKE CONCAT('%', #{record.id}, '%')
        </if>
        <if test="record.apiName != null and record.apiName != ''">
            AND `lc`.`t_apis_dosql`.api_name LIKE CONCAT('%', #{record.apiName}, '%')
        </if>
        <if test="record.sqlFilePath != null and record.sqlFilePath != ''">
            AND `lc`.`t_apis_dosql`.sql_file_path LIKE CONCAT('%', #{record.sqlFilePath}, '%')
        </if>
        <if test="record.params != null and record.params != ''">
            AND `lc`.`t_apis_dosql`.params LIKE CONCAT('%', #{record.params}, '%')
        </if>
        <if test="record.note != null and record.note != ''">
            AND `lc`.`t_apis_dosql`.note LIKE CONCAT('%', #{record.note}, '%')
        </if>
    </select>

</mapper>